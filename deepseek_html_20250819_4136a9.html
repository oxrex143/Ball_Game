<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Ball Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        h1 {
            color: white;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            font-size: 2.5rem;
        }
        
        .level-indicator {
            color: #ffcc00;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .game-info {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
            line-height: 1.5;
        }
        
        #game-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 0 auto 20px;
            cursor: pointer;
        }
        
        #start-screen, #level-complete {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10;
            color: white;
            padding: 20px;
        }
        
        #level-complete {
            display: none;
        }
        
        button {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        #ball {
            position: absolute;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle at 10px 10px, #ffcc00, #ff6600);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.8);
            transition: transform 0.2s;
            z-index: 5;
        }
        
        .path {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .obstacle {
            position: absolute;
            background: linear-gradient(to bottom, #ff416c, #ff4b2b);
            border-radius: 5px;
        }
        
        #finish-line {
            position: absolute;
            width: 30px;
            height: 100%;
            background: linear-gradient(to right, 
                rgba(0, 255, 0, 0.2), 
                rgba(0, 255, 0, 0.5), 
                rgba(0, 255, 0, 0.2));
            right: 0;
            top: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        #scary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.1s;
        }
        
        #scary-image {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }
        
        #prank-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 5rem;
            font-weight: bold;
            color: #ff0066;
            text-shadow: 0 0 20px rgba(255, 0, 102, 0.7);
            z-index: 110;
            text-align: center;
            transition: transform 0.5s;
            pointer-events: none;
        }
        
        .flash {
            animation: flash 0.3s;
        }
        
        @keyframes flash {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        .instructions {
            color: white;
            margin-top: 20px;
            font-size: 1rem;
            line-height: 1.5;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            max-width: 600px;
        }
        
        .swipe-animation {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            
            #game-container {
                height: 300px;
            }
            
            #prank-text {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ultimate Ball Challenge</h1>
        <div class="level-indicator" id="level-indicator">Level 1</div>
        <div class="game-info" id="game-info">Navigate the ball to the finish line without touching the edges!</div>
        
        <div id="game-container">
            <div id="start-screen">
                <h2>Ready for the Challenge?</h2>
                <p>Get the ball to the finish line on the right</p>
                <button id="start-button">Start Game</button>
            </div>
            
            <div id="level-complete">
                <h2>Level Complete!</h2>
                <p>Get ready for the final challenge</p>
                <button id="next-level-button">Next Level</button>
            </div>
            
            <div id="ball"></div>
            <div id="finish-line">END</div>
        </div>
        
        <div class="instructions">
            <p><strong>How to play:</strong> Swipe or drag your mouse to move the ball. Avoid touching the edges!</p>
        </div>
        
        <div class="swipe-animation" id="swipe-animation">← Swipe to move →</div>
    </div>

    <!-- Scary overlay for fullscreen effect -->
    <div id="scary-overlay">
        <img id="scary-image" src="https://i.imgur.com/3sXhNb9.jpeg" alt="Scary Image">
    </div>
    
    <div id="prank-text">IT'S A PRANK!</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const gameContainer = document.getElementById('game-container');
            const ball = document.getElementById('ball');
            const startScreen = document.getElementById('start-screen');
            const levelCompleteScreen = document.getElementById('level-complete');
            const startButton = document.getElementById('start-button');
            const nextLevelButton = document.getElementById('next-level-button');
            const levelIndicator = document.getElementById('level-indicator');
            const gameInfo = document.getElementById('game-info');
            const scaryOverlay = document.getElementById('scary-overlay');
            const scaryImage = document.getElementById('scary-image');
            const prankText = document.getElementById('prank-text');
            const swipeAnimation = document.getElementById('swipe-animation');
            
            let currentLevel = 1;
            let gameActive = false;
            let paths = [];
            let obstacles = [];
            let ballPosition = { x: 30, y: 200 };
            let isDragging = false;
            let startX, startY;
            let ballSpeed = { x: 0, y: 0 };
            let friction = 0.96;
            
            // Initialize game
            function initGame() {
                // Clear previous paths and obstacles
                paths.forEach(path => {
                    if (path.parentNode === gameContainer) {
                        gameContainer.removeChild(path);
                    }
                });
                
                obstacles.forEach(obstacle => {
                    if (obstacle.parentNode === gameContainer) {
                        gameContainer.removeChild(obstacle);
                    }
                });
                
                paths = [];
                obstacles = [];
                
                // Reset ball position
                ballPosition = { x: 30, y: 200 };
                ball.style.left = ballPosition.x + 'px';
                ball.style.top = ballPosition.y + 'px';
                
                // Create game elements based on level
                if (currentLevel === 1) {
                    createLevel1();
                } else if (currentLevel === 2) {
                    createLevel2();
                }
            }
            
            function createLevel1() {
                // Create curved path
                const pathWidth = 600;
                const pathHeight = 80;
                const pathTop = 160;
                
                const path = document.createElement('div');
                path.className = 'path';
                path.style.width = pathWidth + 'px';
                path.style.height = pathHeight + 'px';
                path.style.top = pathTop + 'px';
                path.style.left = '30px';
                path.style.borderRadius = '40px';
                gameContainer.appendChild(path);
                paths.push(path);
                
                // Create some obstacles
                const obstacle1 = document.createElement('div');
                obstacle1.className = 'obstacle';
                obstacle1.style.width = '100px';
                obstacle1.style.height = '20px';
                obstacle1.style.top = (pathTop - 40) + 'px';
                obstacle1.style.left = '200px';
                obstacle1.style.transform = 'rotate(30deg)';
                gameContainer.appendChild(obstacle1);
                obstacles.push(obstacle1);
                
                const obstacle2 = document.createElement('div');
                obstacle2.className = 'obstacle';
                obstacle2.style.width = '100px';
                obstacle2.style.height = '20px';
                obstacle2.style.top = (pathTop + pathHeight + 20) + 'px';
                obstacle2.style.left = '400px';
                obstacle2.style.transform = 'rotate(-30deg)';
                gameContainer.appendChild(obstacle2);
                obstacles.push(obstacle2);
            }
            
            function createLevel2() {
                // Create a more challenging path for level 2
                const pathWidth = 600;
                const pathHeight = 60;
                const pathTop = 170;
                
                const path = document.createElement('div');
                path.className = 'path';
                path.style.width = pathWidth + 'px';
                path.style.height = pathHeight + 'px';
                path.style.top = pathTop + 'px';
                path.style.left = '30px';
                path.style.borderRadius = '30px';
                gameContainer.appendChild(path);
                paths.push(path);
                
                // Create more obstacles
                for (let i = 0; i < 5; i++) {
                    const obstacle = document.createElement('div');
                    obstacle.className = 'obstacle';
                    obstacle.style.width = '80px';
                    obstacle.style.height = '20px';
                    obstacle.style.top = (pathTop - 40 + Math.sin(i) * 80) + 'px';
                    obstacle.style.left = (150 + i * 100) + 'px';
                    obstacle.style.transform = `rotate(${i % 2 === 0 ? 45 : -45}deg)`;
                    gameContainer.appendChild(obstacle);
                    obstacles.push(obstacle);
                }
            }
            
            function checkCollisions() {
                // Check if ball hits the edges
                if (ballPosition.x <= 5 || 
                    ballPosition.x >= gameContainer.offsetWidth - 30 || 
                    ballPosition.y <= 5 || 
                    ballPosition.y >= gameContainer.offsetHeight - 30) {
                    resetBall();
                    return;
                }
                
                // Check if ball reaches finish line
                if (ballPosition.x >= gameContainer.offsetWidth - 50) {
                    levelComplete();
                    return;
                }
                
                // Check if ball hits obstacles
                for (const obstacle of obstacles) {
                    const rect1 = ball.getBoundingClientRect();
                    const rect2 = obstacle.getBoundingClientRect();
                    
                    if (!(rect1.right < rect2.left || 
                          rect1.left > rect2.right || 
                          rect1.bottom < rect2.top || 
                          rect1.top > rect2.bottom)) {
                        resetBall();
                        return;
                    }
                }
            }
            
            function resetBall() {
                ballPosition = { x: 30, y: 200 };
                ball.style.left = ballPosition.x + 'px';
                ball.style.top = ballPosition.y + 'px';
                ballSpeed = { x: 0, y: 0 };
                
                // Add a little shake effect to indicate failure
                gameContainer.style.transform = 'translateX(5px)';
                setTimeout(() => {
                    gameContainer.style.transform = 'translateX(-5px)';
                    setTimeout(() => {
                        gameContainer.style.transform = 'translateX(0)';
                    }, 50);
                }, 50);
            }
            
            function levelComplete() {
                gameActive = false;
                
                if (currentLevel === 1) {
                    // Show level complete screen
                    levelCompleteScreen.style.display = 'flex';
                } else if (currentLevel === 2) {
                    // Trigger the prank
                    triggerPrank();
                }
            }
            
            function triggerPrank() {
                // Flash effect before showing the image
                document.body.classList.add('flash');
                
                // Show scary image in fullscreen with lightning speed
                setTimeout(() => {
                    document.body.classList.remove('flash');
                    scaryOverlay.style.opacity = 1;
                    scaryImage.style.display = 'block';
                    
                    // Play scary sound (commented out to avoid automatic playback issues)
                    // const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-horror-thunder-493.mp3');
                    // audio.play();
                    
                    // After 2 seconds, show prank text
                    setTimeout(() => {
                        scaryOverlay.style.opacity = 0;
                        scaryImage.style.display = 'none';
                        prankText.style.transform = 'translate(-50%, -50%) scale(1)';
                        
                        // After 3 more seconds, reset the game
                        setTimeout(() => {
                            prankText.style.transform = 'translate(-50%, -50%) scale(0)';
                            currentLevel = 1;
                            levelIndicator.textContent = 'Level 1';
                            gameInfo.textContent = 'Navigate the ball to the finish line without touching the edges!';
                            startScreen.style.display = 'flex';
                            initGame();
                        }, 3000);
                    }, 2000);
                }, 300);
            }
            
            function updateBall() {
                if (!gameActive) return;
                
                // Apply friction
                ballSpeed.x *= friction;
                ballSpeed.y *= friction;
                
                // Update position
                ballPosition.x += ballSpeed.x;
                ballPosition.y += ballSpeed.y;
                
                // Apply boundaries
                ballPosition.x = Math.max(5, Math.min(gameContainer.offsetWidth - 30, ballPosition.x));
                ballPosition.y = Math.max(5, Math.min(gameContainer.offsetHeight - 30, ballPosition.y));
                
                // Update ball element
                ball.style.left = ballPosition.x + 'px';
                ball.style.top = ballPosition.y + 'px';
                
                // Check for collisions
                checkCollisions();
                
                // Continue animation
                requestAnimationFrame(updateBall);
            }
            
            // Event listeners for mouse drag
            gameContainer.addEventListener('mousedown', function(e) {
                if (!gameActive) return;
                
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                ballSpeed = { x: 0, y: 0 };
            });
            
            gameContainer.addEventListener('mousemove', function(e) {
                if (!isDragging || !gameActive) return;
                
                const dx = e.clientX - startX;
                const dy = e.clientY - startY;
                
                ballSpeed.x = dx * 0.2;
                ballSpeed.y = dy * 0.2;
                
                startX = e.clientX;
                startY = e.clientY;
            });
            
            gameContainer.addEventListener('mouseup', function() {
                isDragging = false;
            });
            
            gameContainer.addEventListener('mouseleave', function() {
                isDragging = false;
            });
            
            // Event listeners for touch events
            gameContainer.addEventListener('touchstart', function(e) {
                if (!gameActive) return;
                
                isDragging = true;
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                ballSpeed = { x: 0, y: 0 };
                e.preventDefault();
            });
            
            gameContainer.addEventListener('touchmove', function(e) {
                if (!isDragging || !gameActive) return;
                
                const dx = e.touches[0].clientX - startX;
                const dy = e.touches[0].clientY - startY;
                
                ballSpeed.x = dx * 0.2;
                ballSpeed.y = dy * 0.2;
                
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                e.preventDefault();
            });
            
            gameContainer.addEventListener('touchend', function() {
                isDragging = false;
            });
            
            // Start button event
            startButton.addEventListener('click', function() {
                startScreen.style.display = 'none';
                gameActive = true;
                initGame();
                updateBall();
                swipeAnimation.style.display = 'none';
            });
            
            // Next level button event
            nextLevelButton.addEventListener('click', function() {
                levelCompleteScreen.style.display = 'none';
                currentLevel = 2;
                levelIndicator.textContent = 'Level 2';
                gameInfo.textContent = 'Final Challenge! Be prepared for surprises...';
                gameActive = true;
                initGame();
                updateBall();
            });
            
            // Initial setup
            initGame();
            ball.style.left = ballPosition.x + 'px';
            ball.style.top = ballPosition.y + 'px';
        });
    </script>
</body>
</html>